import{a as g}from"./chunk-XWTN2QSH.js";import"./chunk-A6SUGU7W.js";import{n as f}from"./chunk-BRLBBIEX.js";import{a as y}from"./chunk-D3DGSUDI.js";import{e as k}from"./chunk-PUVU7ZUS.js";import{a as S,d as m}from"./chunk-MYGIRSMY.js";import{c as u}from"./chunk-5TBO732O.js";var o=u(S(),1);var d=u(m(),1),j=t=>({_seed:1,schedulerPlugins:[],plugin:function(h){this.schedulerPlugins.push(h),t.plugin(h)},getSchedulerInstance:function(){return t},...t}),E=({projectId:t,userId:a,compId:h})=>{let[b,w]=(0,o.useState)([]),[_,c]=(0,o.useState)(!0),n=(0,o.useRef)(null);return(0,o.useEffect)(()=>{let p=async()=>{c(!0),console.log("Data fetching from Scheduler =====>>>>>.........");try{let e=new FormData;e.append("op","get_schedule_calendar_events"),e.append("project_id",t.toString()??"0"),e.append("for","dashboard_summary"),e.append("start_date_range","2024-9-01 00:00:00"),e.append("version","web"),e.append("from","panel"),e.append("iframe_call","0"),e.append("tz","+5:30"),e.append("tzid","Asia/Calcutta"),e.append("curr_time","2024-08-31 15:50:38"),e.append("force_login","0"),e.append("global_project",""),e.append("user_id",a.toString()??"0"),e.append("company_id",h.toString()??"0");let l=await g.post(`https://api-cfdev.contractorforeman.net/service.php?opp=get_schedule_calendar_events&c=${h?Number(h):0}&u=${a?Number(a):0}&p=manage_projects`,e);console.log("Data fetching Successfull from Scheduler  =====>>>>>",l?.data),w(l?.data?.data?.modules),c(!1)}catch(e){c(!1),console.log("Error fetching data:",e)}finally{c(!1)}},i=setTimeout(()=>{p()},300);return()=>{clearTimeout(i)}},[t,a,h]),(0,o.useEffect)(()=>((async()=>{let{default:i}=await import("./dhtmlxscheduler.es-LUEABIOB.js");if(window.SumScheduler=j(i),n.current){let e=window.SumScheduler;e.SumScheduler.config.header=["date","prev","today","next"],e.SumScheduler.config.multi_day=!1,e.SumScheduler.config.first_hour=0,e.SumScheduler.config.last_hour=24,e.SumScheduler.config.scale_width=0,e.SumScheduler.config.readonly=!0,e.SumScheduler.config.drag_resize=!1,e.SumScheduler.config.drag_move=!1,e.SumScheduler.xy.scale_width=0,e.SumScheduler.config.left_border=!1;let l=()=>(typeof window<"u"&&e.innerWidth<768?(e.SumScheduler.config.header=["prev","date","next"],e.SumScheduler.xy.scale_width=40,e.SumScheduler.templates.week_scale_date=function(r){return e.SumScheduler.date.date_to_str("%D")(r)}):(e.SumScheduler.config.header=["date","today","prev","next"],e.SumScheduler.xy.scale_width=50,e.SumScheduler.templates.week_scale_date=function(r){return e.SumScheduler.date.date_to_str("%D, %F %j")(r)}),n.current&&e.SumScheduler.updateView(),!0),A=new Date;e.SumScheduler.init(n.current,A,"week"),e.SumScheduler.parse(b),l(),e.SumScheduler.attachEvent("onBeforeViewChange",l),e.SumScheduler.attachEvent("onSchedulerResize",l),e.SumScheduler.templates.event_class=function(r,x,s){return s.classname||""},e.SumScheduler.ignore_week=function(r){if(r.getDay()===0||r.getDay()===6)return!0},e.SumScheduler.templates.week_date=function(r){let x=e.SumScheduler.date.add(r,6,"day"),s=v=>{let z=v.getDate()-1,F=v.toLocaleString("default",{month:"short"});return`${z} ${F}`};return`Sun, ${s(r)} ${r.getFullYear()} - Sat, ${s(x)} ${x.getFullYear()}`},window.addEventListener("resize",l)}})(),()=>{window.SumScheduler&&window.SumScheduler.clearAll()}),[b]),(0,d.jsx)(d.Fragment,{children:_?(0,d.jsx)("div",{className:"h-[268px]",children:(0,d.jsx)(k,{})}):(0,d.jsxs)("div",{className:"w-full relative",children:[(0,d.jsx)("div",{className:`${!_&&"lg:absolute "} mt-4 lg:mt-0 lg:top-4 z-50`,children:(0,d.jsx)(y,{icon:f,label:"Schedule",bgColor:"#ECF3FF",color:"#78AEFE"})}),(0,d.jsx)("div",{ref:n,style:{width:"100%",height:"100%"}})]})})},W=E;export{W as default};
