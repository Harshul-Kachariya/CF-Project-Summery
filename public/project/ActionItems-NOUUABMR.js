import{a as h}from"./chunk-XWTN2QSH.js";import"./chunk-N6IYFVZN.js";import{k as b}from"./chunk-BRLBBIEX.js";import{a as N}from"./chunk-DRECAGTU.js";import{e as d}from"./chunk-4HJTQ2QY.js";import{b as g}from"./chunk-HOGY4L3A.js";import{a as w}from"./chunk-LIQWK7XC.js";import{c as f}from"./chunk-5TBO732O.js";var o=f(w(),1);var t=f(g(),1),D=({projectId:s,userId:a,compId:n})=>{let[r,v]=(0,o.useState)([]),[y,i]=(0,o.useState)(!0),[u,S]=(0,o.useState)();(0,o.useEffect)(()=>{import("./react-apexcharts.min-HOW35RKL.js").then(m=>S(()=>m.default))},[]),(0,o.useEffect)(()=>{let m=async()=>{i(!0),console.log("Data fetching from Action Items =====>>>>>.........");try{let e=new FormData;e.append("op","get_project_reference_detail"),e.append("project_id",s.toString()??"0"),e.append("need_more_data","0"),e.append("for_module_key",""),e.append("version","web"),e.append("from","panel"),e.append("iframe_call","0"),e.append("tz","+5:30"),e.append("tzid","Asia/Calcutta"),e.append("curr_time",new Date().toISOString()),e.append("force_login","0"),e.append("global_project",""),e.append("user_id",a.toString()??"0"),e.append("company_id",n.toString()??"0");let _=await h.post(`https://api-cfdev.contractorforeman.net/service.php?opp=get_project_reference_detail&c=${n?Number(n):0}&u=${a?Number(a):0}&p=manage_projects`,e);console.log("Data fetching Successfull from Action Items  =====>>>>>",_?.data),v(_?.data?.data?.modules||[]),i(!1)}catch(e){console.log("Error fetching data from Action Items =====>>>>>",e),console.error("Error fetching data:",e)}finally{i(!1)}},C=setTimeout(()=>{s&&m()},300);return()=>clearTimeout(C)},[s,a,n]);let x={chart:{id:"chart1",type:"bar",stacked:!0,toolbar:{show:!1}},plotOptions:{bar:{horizontal:!0,dataLabels:{total:{enabled:!0,offsetX:0,style:{fontSize:"13px",fontWeight:900}}}}},xaxis:{categories:["OPEN","DUE","CLOSED"],tickPlacement:"on"},colors:["#684CC7","#e01f35","#282691"],legend:{show:!0,position:"top"}},c=r?.open_incomplete_item?.opnIncoInvoice[0]||{},l=r?.open_incomplete_item?.opnIncoBills[0]||{},p=r?.open_incomplete_item?.opnIncoPurchaseOrder[0]||{},A=[{name:"Invoices",data:[Number(c?.total_open)||0,Number(c?.total_due)||0,Number(c?.total_close)||0]},{name:"Bills",data:[Number(l?.total_open)||0,Number(l?.bill_count)||0,Number(l?.total_close)||0]},{name:"Purchase Orders",data:[Number(p?.total_open)||0,Number(p?.bill_count)||0,Number(p?.total_close)||0]}];if(r?.length<=0){console.log("<<<<<==== Data not Available ====>>>>>");return}return(0,t.jsx)(t.Fragment,{children:y?(0,t.jsxs)("div",{className:"h-full",children:[(0,t.jsx)(N,{icon:b,label:"Action Items",bgColor:"#F0E5FF",color:"#684CC7",className:"text-base"}),u?(0,t.jsx)(o.Suspense,{children:(0,t.jsx)(u,{type:"bar",height:250,options:x,series:A})}):(0,t.jsx)(d,{})]}):(0,t.jsx)("div",{className:"flex justify-center items-center w-full h-full",children:(0,t.jsx)(d,{})})})},F=D;export{F as default};
