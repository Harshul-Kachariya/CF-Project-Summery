import{a as f}from"./chunk-XWTN2QSH.js";import"./chunk-A6SUGU7W.js";import{n as m}from"./chunk-BRLBBIEX.js";import{a as w}from"./chunk-D3DGSUDI.js";import{f as y}from"./chunk-P47B6QHV.js";import{a as E,d as k}from"./chunk-MYGIRSMY.js";import{c as u}from"./chunk-5TBO732O.js";var h=u(E(),1);var o=u(k(),1),D=l=>({_seed:1,schedulerPlugins:[],plugin:function(t){this.schedulerPlugins.push(t),l.plugin(t)},getSchedulerInstance:function(){return l},...l}),B=({projectId:l,userId:t,compId:a})=>{let[b,A]=(0,h.useState)([]),[_,c]=(0,h.useState)(!0),n=(0,h.useRef)(null);return(0,h.useEffect)(()=>{let p=async()=>{c(!0),console.log("Data fetching from Scheduler =====>>>>>.........");try{let r=new FormData;r.append("op","get_schedule_calendar_events"),r.append("project_id",l.toString()??"0"),r.append("for","dashboard_summary"),r.append("start_date_range","2024-9-01 00:00:00"),r.append("version","web"),r.append("from","panel"),r.append("iframe_call","0"),r.append("tz","+5:30"),r.append("tzid","Asia/Calcutta"),r.append("curr_time","2024-08-31 15:50:38"),r.append("force_login","0"),r.append("global_project",""),r.append("user_id",t.toString()??"0"),r.append("company_id",a.toString()??"0");let e=await f.post(`https://api-cfdev.contractorforeman.net/service.php?opp=get_schedule_calendar_events&c=${a?Number(a):0}&u=${t?Number(t):0}&p=manage_projects`,r);console.log("Data fetching Successfull from Scheduler  =====>>>>>",e?.data),A(e?.data?.data?.modules),c(!1)}catch(r){c(!1),console.log("Error fetching data:",r)}finally{c(!1)}},v=setTimeout(()=>{p()},300);return()=>{clearTimeout(v)}},[l,t,a]),(0,h.useEffect)(()=>((async()=>{let r=(await import("./dhtmlxscheduler.es-LUEABIOB.js")).default;window.SumScheduler=D(r);let e=window.SumScheduler;if(n.current){e.config.header=["date","prev","today","next"],e.config.multi_day=!1,e.config.first_hour=0,e.config.last_hour=24,e.config.scale_width=0,e.config.readonly=!0,e.config.drag_resize=!1,e.config.drag_move=!1,e.xy.scale_width=0,e.config.left_border=!1;let s=()=>(typeof window<"u"&&window.innerWidth<768?(e.config.header=["prev","date","next"],e.xy.scale_width=40,e.templates.week_scale_date=d=>e.date.date_to_str("%D")(d)):(e.config.header=["date","today","prev","next"],e.xy.scale_width=50,e.templates.week_scale_date=d=>e.date.date_to_str("%D, %F %j")(d)),n.current&&e.updateView(),!0),z=new Date;e.init(n.current,z,"week"),e.parse(b),s(),e.attachEvent("onBeforeViewChange",s),e.attachEvent("onSchedulerResize",s),e.templates.event_class=(d,x,i)=>i.classname||"",e.ignore_week=d=>d.getDay()===0||d.getDay()===6,e.templates.week_date=d=>{let x=e.date.add(d,6,"day"),i=g=>{let F=g.getDate()-1,j=g.toLocaleString("default",{month:"short"});return`${F} ${j}`};return`Sun, ${i(d)} ${d.getFullYear()} - Sat, ${i(x)} ${x.getFullYear()}`},window.addEventListener("resize",s)}})(),()=>{window.SumScheduler&&window.SumScheduler.clearAll()}),[b]),(0,o.jsx)(o.Fragment,{children:_?(0,o.jsx)("div",{className:"h-[268px]",children:(0,o.jsx)(y,{})}):(0,o.jsxs)("div",{className:"w-full relative",children:[(0,o.jsx)("div",{className:`${!_&&"lg:absolute "} mt-4 lg:mt-0 lg:top-4 z-50`,children:(0,o.jsx)(w,{icon:m,label:"Schedule",bgColor:"#ECF3FF",color:"#78AEFE"})}),(0,o.jsx)("div",{ref:n,className:"w-full h-full"})]})})},O=B;export{O as default};
