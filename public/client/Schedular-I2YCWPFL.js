import{a as m}from"./chunk-XWTN2QSH.js";import{m as k}from"./chunk-IGDJXKQZ.js";import{a as w}from"./chunk-U4YIGAEB.js";import{a as F,d as y,e as v}from"./chunk-6X2CQ5RN.js";import{c as p}from"./chunk-5TBO732O.js";var h=p(F(),1);var d=p(y(),1),j=({projectId:a,userId:l,compId:t})=>{let[x,u]=(0,h.useState)([]),[b,c]=(0,h.useState)(!0),n=(0,h.useRef)(null);return(0,h.useEffect)(()=>{let g=async()=>{c(!0),console.log("Data fetching from Scheduler =====>>>>>.........");try{let r=new FormData;r.append("op","get_schedule_calendar_events"),r.append("project_id",a.toString()??"0"),r.append("for","dashboard_summary"),r.append("start_date_range","2024-9-01 00:00:00"),r.append("version","web"),r.append("from","panel"),r.append("iframe_call","0"),r.append("tz","+5:30"),r.append("tzid","Asia/Calcutta"),r.append("curr_time","2024-08-31 15:50:38"),r.append("force_login","0"),r.append("global_project",""),r.append("user_id",l.toString()??"0"),r.append("company_id",t.toString()??"0");let s=await m.post(`https://api-cfdev.contractorforeman.net/service.php?opp=get_schedule_calendar_events&c=${t?Number(t):0}&u=${l?Number(l):0}&p=manage_projects`,r);console.log("Data fetching Successfull from Scheduler  =====>>>>>",s?.data),u(s?.data?.data?.modules),c(!1)}catch(r){c(!1),console.log("Error fetching data:",r)}finally{c(!1)}},e=setTimeout(()=>{g()},300);return()=>{clearTimeout(e)}},[a,l,t]),(0,h.useEffect)(()=>((async()=>{let e=(await import("./dhtmlxscheduler.es-LUEABIOB.js")).default;if(n.current){e.config.header=["date","prev","today","next"],e.config.multi_day=!1,e.config.first_hour=0,e.config.last_hour=24,e.config.scale_width=0,e.config.readonly=!0,e.config.drag_resize=!1,e.config.drag_move=!1,e.xy.scale_width=0,e.config.left_border=!1;let r=()=>(typeof window<"u"&&window.innerWidth<768?(e.config.header=["prev","date","next"],e.xy.scale_width=40,e.templates.week_scale_date=function(o){return e.date.date_to_str("%D")(o)}):(e.config.header=["date","today","prev","next"],e.xy.scale_width=50,e.templates.week_scale_date=function(o){return e.date.date_to_str("%D, %F %j")(o)}),n.current&&e.updateView(),!0),s=new Date;e.init(n.current,s,"week"),e.parse(x),r(),e.attachEvent("onBeforeViewChange",r),e.attachEvent("onSchedulerResize",r),e.templates.event_class=function(o,_,i){return i.classname||""},e.ignore_week=function(o){if(o.getDay()===0||o.getDay()===6)return!0},e.templates.week_date=function(o){let _=e.date.add(o,6,"day"),i=f=>{let A=f.getDate()-1,z=f.toLocaleString("default",{month:"short"});return`${A} ${z}`};return`Sun, ${i(o)} ${o.getFullYear()} - Sat, ${i(_)} ${_.getFullYear()}`},window.addEventListener("resize",r)}})(),()=>{import("./dhtmlxscheduler.es-LUEABIOB.js").then(e=>e.default.clearAll())}),[x]),(0,d.jsxs)("div",{className:"w-full relative",children:[(0,d.jsx)("div",{className:`${!b&&"lg:absolute "} mt-4 lg:mt-0 lg:top-4 z-50`,children:(0,d.jsx)(w,{icon:k,label:"Schedule",bgColor:"#ECF3FF",color:"#78AEFE"})}),b?(0,d.jsx)("div",{className:"mt-3 h-full",children:(0,d.jsx)(E,{className:`${!b&&"min-h-48"}`})}):(0,d.jsx)("div",{ref:n,style:{width:"100%",height:"100%"}})]})},I=j,E=({className:a})=>(0,d.jsxs)("table",{className:`w-full border-2 ${a}`,children:[(0,d.jsx)("thead",{children:(0,d.jsx)("tr",{className:"bg-black/10 h-7",children:[...Array(6)].map((l,t)=>(0,d.jsx)("th",{className:"font-normal",children:(0,d.jsx)(v,{className:"h-3 w-40 mx-auto rounded-xl bg-gray-300"})},t))})}),(0,d.jsx)("tbody",{children:[...Array(6)].map((l,t)=>(0,d.jsx)("tr",{children:[...Array(6)].map((x,u)=>(0,d.jsx)("td",{className:"py-1",children:(0,d.jsx)(v,{className:"h-2.5 rounded bg-gray-300 mx-auto",style:{width:`${Math.floor(Math.random()*40)+60}%`}})},u))},t))})]});export{I as default};
