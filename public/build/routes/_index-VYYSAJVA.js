import{a as _}from"/build/_shared/chunk-K3LLJEF6.js";import{f as N,h as S}from"/build/_shared/chunk-657A45VU.js";import{b as x,c as j}from"/build/_shared/chunk-HFRXINCS.js";import"/build/_shared/chunk-L4JQJ63A.js";import{a as h,b as f}from"/build/_shared/chunk-BVJBT3X3.js";import{d as m}from"/build/_shared/chunk-T36URGAI.js";var t=m(h(),1);var l=m(h(),1);function w(r,n,p){let[i,a]=(0,l.useState)(null),[v,d]=(0,l.useState)(!0),[g,u]=(0,l.useState)("");return(0,l.useEffect)(()=>{async function c(){try{d(!0),u(""),console.log("Fetching data...");let o=new FormData;o.append("op","get_project_detail"),o.append("project_id",r.toString()),o.append("is_refresh","0"),o.append("record_type","project"),o.append("version","web"),o.append("from","panel"),o.append("iframe_call","0"),o.append("tz","+5:30"),o.append("tzid","Asia/Calcutta"),o.append("curr_time",new Date().toISOString()),o.append("force_login","0"),o.append("global_project",""),o.append("user_id",n.toString()),o.append("company_id",p.toString());let y=await _.post(`https://api-cfdev.contractorforeman.net/service.php?opp=get_project_detail&c=${Number(p)??0}&u=${Number(n)??0}&p=manage_projects`,o);console.log("Data fetched successfully",y?.data);let L=y?.data?.data;a(L),d(!1)}catch(o){console.error("Error fetching data:",o),u("Failed to load data. Please try again."),d(!1)}finally{d(!1)}}let D=setTimeout(()=>{c()},100);return()=>{clearTimeout(D)}},[r,n,p]),{data:i,isLoading:v,error:g}}var s=m(f(),1),P=({data:r,isLoading:n})=>(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"flex justify-start items-center gap-3 w-full  ",children:[(0,s.jsx)("div",{className:"bg-[#ffe8d2dd] w-12 h-10 rounded-full flex justify-center items-center text-[#FB8056] ",children:(0,s.jsx)(x,{icon:N,className:"text-base"})}),(0,s.jsxs)("div",{className:" w-full",children:["Customer",(0,s.jsxs)("p",{className:"flex justify-between items-center  font-semibold hover:text-[#FB8056] hover:cursor-pointer hover:transition-all hover:duration-700",children:[n?(0,s.jsx)(j,{className:"h-2.5 rounded-xl w-2/3"}):r?.customer_name," ",(0,s.jsx)("span",{className:"text-[#FB8056] font-semibold",children:(0,s.jsx)(x,{icon:S,className:"text-sm"})})]})]})]})}),I=P;var e=m(f(),1),F=(0,t.lazy)(()=>import("/build/_shared/ProjectSummary-4WLN6FM2.js")),$=(0,t.lazy)(()=>import("/build/_shared/Invoiced-HC4TNGQW.js")),C=(0,t.lazy)(()=>import("/build/_shared/ActionItems-LSXW6Y6J.js")),A=(0,t.lazy)(()=>import("/build/_shared/SummaryPercentages-EK5EIUXG.js")),M=(0,t.lazy)(()=>import("/build/_shared/WorkInprogress-PQMIJWZK.js")),k=(0,t.lazy)(()=>import("/build/_shared/RecentPhtotos-XBZMXLLK.js")),z=(0,t.lazy)(()=>import("/build/_shared/Schedular-G3P7WYXR.js")),B=(0,t.lazy)(()=>import("/build/_shared/Top-3C7GVIPC.js")),E=()=>[{title:"Project Dashboard"},{name:"description",content:"Project management dashboard"}];function b(){let r="137869",n="408",p="50304",{data:i,isLoading:a,error:v}=w(r,p,n);if(console.log("projectID =======>>>>>>>>",r),console.log("userId =======>>>>>>>>",p),console.log("COMPiD =======>>>>>>>>",n),console.log("Loading =======>>>>>>>>",a),!i)return;let{project_summary:d,wip_widget:g,customer_additional_contacts:u}=i,c="common-card";return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"space-y-4 w-full p-4 overflow-y-auto sidebar",children:[(0,e.jsx)("div",{className:"w-full",children:(0,e.jsx)(t.Suspense,{children:(0,e.jsx)(B,{data:i,isLoading:a})})}),(0,e.jsxs)("div",{className:"grid 2xl:grid-cols-3 lg:grid-cols-2 grid-cols-1 gap-2.5 mt-2.5",children:[(0,e.jsx)("div",{className:`${c} py-3 px-[15px] min-h-[300px]`,children:(0,e.jsx)(t.Suspense,{children:(0,e.jsx)(F,{data:d,isLoading:a})})}),(0,e.jsx)("div",{className:`${c} py-3 px-[15px] min-h-[300px]`,children:(0,e.jsx)(t.Suspense,{children:(0,e.jsx)(A,{data:i,isLoading:a})})}),(0,e.jsx)("div",{className:`${c} py-3 px-[15px] min-h-[300px]`,children:(0,e.jsx)(t.Suspense,{children:(0,e.jsx)(C,{projectId:r,userId:p,compId:n,isLoading:a})})}),(0,e.jsxs)("div",{className:"flex flex-col gap-2.5",children:[(0,e.jsx)("div",{className:"common-card py-3 px-[15px] h-fit min-h-[65px]",children:(0,e.jsx)(t.Suspense,{children:(0,e.jsx)(I,{data:i,isLoading:a})})}),(0,e.jsx)("div",{className:"common-card py-3 px-[15px] h-full min-h-[177px]",children:(0,e.jsx)(t.Suspense,{children:(0,e.jsx)($,{data:i,customer_additional_contacts:u,isLoading:a})})})]}),(0,e.jsx)("div",{className:`${c}  py-3 px-[15px] min-h-[260px]`,children:(0,e.jsx)(t.Suspense,{children:(0,e.jsx)(M,{data:g,isLoading:a})})}),(0,e.jsx)("div",{className:`${c}  py-3 px-[15px] min-h-[260px]`,children:(0,e.jsx)(t.Suspense,{children:(0,e.jsx)(k,{data:i,isLoading:a})})})]}),(0,e.jsx)("div",{className:`${c}  py-3 px-[15px] min-h-[268px]`,children:(0,e.jsx)(t.Suspense,{children:(0,e.jsx)(z,{projectId:r,userId:p,compId:n,isLoading:a})})})]},Math.random())})}export{b as default,E as meta};
