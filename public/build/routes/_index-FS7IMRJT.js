import{a as l}from"/build/_shared/chunk-K3LLJEF6.js";import{a as h,b as d}from"/build/_shared/chunk-BVJBT3X3.js";import{d as c}from"/build/_shared/chunk-T36URGAI.js";var a=c(h(),1),e=c(d(),1),j=(0,a.lazy)(()=>import("/build/_shared/ProjectSummary-KLWJLAM6.js")),x=(0,a.lazy)(()=>import("/build/_shared/Invoiced-X7DZUTGY.js")),w=(0,a.lazy)(()=>import("/build/_shared/ActionItems-MVGARJNN.js")),N=(0,a.lazy)(()=>import("/build/_shared/SummaryPercentages-5DB4BFGG.js")),P=(0,a.lazy)(()=>import("/build/_shared/WorkInprogress-BYPI2M5M.js")),L=(0,a.lazy)(()=>import("/build/_shared/RecentPhtotos-ZIVJMDJ4.js")),k=(0,a.lazy)(()=>import("/build/_shared/Schedular-ANYRMGIA.js")),D=(0,a.lazy)(()=>import("/build/_shared/Top-Q26SQZEY.js")),$=()=>[{title:"Project Dashboard"},{name:"description",content:"Project management dashboard"}];function m({projectId:r,userId:o,compId:n}){let[s,u]=(0,a.useState)(null),[g,p]=(0,a.useState)(!0),[I,z]=(0,a.useState)(!0);console.log("projectID>>>>>>>>>>>>>>>>",r),console.log("userId",o),console.log("compId",n);let f=async()=>{try{s&&p(!1);let t=new FormData;t.append("op","get_project_detail"),t.append("project_id",r.toString()??"0"),t.append("is_refresh","0"),t.append("record_type","project"),t.append("version","web"),t.append("from","panel"),t.append("iframe_call","0"),t.append("tz","+5:30"),t.append("tzid","Asia/Calcutta"),t.append("curr_time",new Date().toISOString()??"0"),t.append("force_login","0"),t.append("global_project",""),t.append("user_id",o.toString()),t.append("company_id",n.toString()??"0");let S=(await l.post(`https://api-cfdev.contractorforeman.net/service.php?opp=get_project_detail&c=${n?Number(n):0}&u=${o?Number(o):0}&p=manage_projects`,t))?.data?.data;u(S),p(!1)}catch(t){console.error("Error fetching data:",t),p(!1)}};if((0,a.useEffect)(()=>{if(r){let t=setTimeout(()=>{f()},300);return()=>{clearTimeout(t)}}},[r,o,n]),g)return(0,e.jsx)("div",{className:"flex justify-center items-center h-screen",children:"Loading..."});if(!s)return(0,e.jsx)("div",{className:"flex justify-center items-center h-screen",children:"No data available"});let{project_summary:v,wip_widget:_,customer_additional_contacts:b,billing_vs_actual:y}=s,i="bg-white border rounded-md hover:shadow-lg transition-shadow duration-500";return(0,e.jsxs)("div",{className:"space-y-4 p-4 overflow-y-auto sidebar",children:[(0,e.jsx)("div",{className:"w-full",children:(0,e.jsx)(a.Suspense,{fallback:(0,e.jsx)("p",{children:"Loading Project topbar..."}),children:(0,e.jsx)(D,{data:y})})}),(0,e.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-3",children:[(0,e.jsx)("div",{className:`${i} p-4`,children:(0,e.jsx)(a.Suspense,{fallback:(0,e.jsx)("p",{children:"Loading Project Summary..."}),children:(0,e.jsx)(j,{data:v})})}),(0,e.jsx)("div",{className:`${i} px-4 pt-4`,children:(0,e.jsx)(a.Suspense,{fallback:(0,e.jsx)("p",{children:"Loading Summary Percentages..."}),children:(0,e.jsx)(N,{data:s})})}),(0,e.jsx)("div",{className:`${i} px-4 pt-4`,children:(0,e.jsx)(a.Suspense,{fallback:(0,e.jsx)("p",{children:"Loading Action Items..."}),children:(0,e.jsx)(w,{projectId:r,userId:o,compId:n})})}),(0,e.jsx)("div",{children:(0,e.jsx)(a.Suspense,{fallback:(0,e.jsx)("p",{children:"Loading Invoiced..."}),children:(0,e.jsx)(x,{data:s,customer_additional_contacts:b})})}),(0,e.jsx)("div",{className:`${i} px-4 pb-2 lg:pt-4`,children:(0,e.jsx)(a.Suspense,{fallback:(0,e.jsx)("p",{children:"Loading Work In Progress..."}),children:(0,e.jsx)(P,{data:_})})}),(0,e.jsx)("div",{className:`${i} p-4`,children:(0,e.jsx)(a.Suspense,{fallback:(0,e.jsx)("p",{children:"Loading Recent Photos..."}),children:(0,e.jsx)(L,{data:s})})})]}),(0,e.jsx)("div",{className:`${i} px-4 h-60`,children:(0,e.jsx)(a.Suspense,{fallback:(0,e.jsx)("p",{children:"Loading Scheduler..."}),children:(0,e.jsx)(k,{projectId:r,userId:o,compId:n})})})]})}export{m as default,$ as meta};
